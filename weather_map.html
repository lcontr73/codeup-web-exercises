<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<div class="card" style="width: 18rem;">
    <h5 id="currentHeading"></h5>
    <div id="temp"></div>
    <div id="description"></div>
    <div id="humidity"></div>
    <div id="wind"></div>
    <div id="pressure"></div>
</div>
<div id='forecast' class="card" style="width: 18rem;"></div>
<div id='weeklyForecast' class="card" style="width: 18rem;"></div>

<script src="js/jquery-3.6.0.js"></script>
<script src="js/keys.js"></script>

<script>
    (function () {
        "use strict";
        $.get("http://api.openweathermap.org/data/2.5/onecall", {
            APPID: OPEN_WEATHER_APPID,
            lat: 29.4588766,
            lon: -98.7952554,
            units: "imperial"
        }).done(function (data) {
            console.log('The entire response:', data);
            //Current Forecast
            const months = ["JAN", "FEB", "MAR","APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
            let current_datetime = new Date ()
            let formatted_current_date = current_datetime.getDate() + "_" + (current_datetime.getMonth() + 1) + "_" + current_datetime.getFullYear()
            $('#currentHeading').html(formatted_current_date)
            $('#temp').html('Temperature: ' + data.current.temp);
            $('#description').html('Description: ' + data.current.weather[0].description)
            $('#humidity').html('Humidity: ' + data.current.humidity);
            $('#wind').html('Wind: ' + data.current.wind_speed);
            $('#pressure').html('Pressure: ' + data.current.pressure);

            // 5 Day Forcast
            data.daily.forEach(function (dailyForecast, index) {
                if (index < 5) {
                    $('#weeklyForecast').append(
                        '<div class="weekly"> Temperature: ' + dailyForecast.temp.max + "/ " + dailyForecast.temp.min + '</div>' +
                        '<div class="weekly"> Description: ' + dailyForecast.weather[0].description + '</div>' +
                        '<div class="weekly"> Humidity: ' + dailyForecast.humidity + '</div>' +
                        '<div class="weekly"> Wind: ' + dailyForecast.wind_speed + '</div>' +
                        '<div class="weekly"> Pressure: ' + dailyForecast.pressure + '</div>')
                }
            });
        });


    })();

</script>


</body>
</html>