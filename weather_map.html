<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <style>

        body {
            display: flex;

        }

        .card-header {
            justify-content: center;
        }

        #weeklyForecast {
            display: flex;
        }

        .card {
            display: flex;
        }
    </style>
</head>
<body>

<!--<div class="card" style="width: 18rem;">-->
<!--    <h5 id="currentHeading"></h5>-->
<!--    <div id="temp"></div>-->
<!--    <div id="description"></div>-->
<!--    <div id="humidity"></div>-->
<!--    <div id="wind"></div>-->
<!--    <div id="pressure"></div>-->
<!--</div>-->
<!--<div id='forecast' class="card" style="width: 18rem;"></div>-->
<div id='weeklyForecast' class="row"></div>

<script src="js/jquery-3.6.0.js"></script>
<script src="js/keys.js"></script>

<script>
    (function () {
        "use strict";
        $.get("http://api.openweathermap.org/data/2.5/onecall", {
            APPID: OPEN_WEATHER_APPID,
            lat: 29.4588766,
            lon: -98.7952554,
            units: "imperial"
        }).done(function (data) {
            console.log('The entire response:', data);
            //Current Forecast
            console.log('current information: ', data.current)

            const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
            let current_datetime = new Date()


            //This gets the date to populate
            function formatTime(timeStamp) {
                let dateTime = new Date(timeStamp * 1000);
                let year = dateTime.getFullYear();
                let month = months[dateTime.getMonth()];
                let day = dateTime.getDate();

                let formattedDateTime = year + " " + month + " " + day;
                return formattedDateTime;
            }

            // 5 Day Forecast
            data.daily.forEach(function (dailyForecast, index) {
                if (index < 5) {
                    $('#weeklyForecast').append(
                        '<div class="col">' +
                        '<div class="card">' +
                        '<div class="card-header">' + formatTime(dailyForecast.dt) + '</div' +
                        '<div class="card-body">' +
                        '<p class="card-text"> Temperature: ' + dailyForecast.temp.max + "/ " + dailyForecast.temp.min + '</p>' +
                        '<p class="weekly"> Description: ' + dailyForecast.weather[0].description + '</p>' +
                        '<p class="weekly"> Humidity: ' + dailyForecast.humidity + '</p>' +
                        '<hr>' +
                        '<p class="weekly"> Wind: ' + dailyForecast.wind_speed + '</p>' +
                        '<hr>' +
                        '<p class="weekly"> Pressure: ' + dailyForecast.pressure + '</p>' + '</div>' +
                        '</div>' +
                        '</div>')
                }
            });
        });


    })();

</script>


</body>
</html>